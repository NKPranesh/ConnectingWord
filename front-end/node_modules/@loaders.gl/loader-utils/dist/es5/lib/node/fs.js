"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports._readToArrayBuffer = _readToArrayBuffer;
exports.isSupported = exports.fstat = exports.read = exports.close = exports.open = exports.writeFileSync = exports.writeFile = exports.readFileSync = exports.readFile = exports.stat = exports.readdir = void 0;

var _fs = _interopRequireDefault(require("fs"));

var _buffer = require("./buffer");

var _util = require("./util");

const readdir = (0, _util.promisify)(_fs.default.readdir);
exports.readdir = readdir;
const stat = (0, _util.promisify)(_fs.default.stat);
exports.stat = stat;
const readFile = (0, _util.promisify)(_fs.default.readFile);
exports.readFile = readFile;
const readFileSync = _fs.default.readFileSync;
exports.readFileSync = readFileSync;
const writeFile = (0, _util.promisify)(_fs.default.writeFile);
exports.writeFile = writeFile;
const writeFileSync = _fs.default.writeFileSync;
exports.writeFileSync = writeFileSync;
const open = (0, _util.promisify)(_fs.default.open);
exports.open = open;
const close = (0, _util.promisify)(_fs.default.close);
exports.close = close;
const read = (0, _util.promisify)(_fs.default.read);
exports.read = read;
const fstat = (0, _util.promisify)(_fs.default.fstat);
exports.fstat = fstat;
const isSupported = Boolean(_fs.default);
exports.isSupported = isSupported;

async function _readToArrayBuffer(fd, start, length) {
  const buffer = Buffer.alloc(length);
  const {
    bytesRead
  } = await read(fd, buffer, 0, length, start);

  if (bytesRead !== length) {
    throw new Error('fs.read failed');
  }

  return (0, _buffer.toArrayBuffer)(buffer);
}
//# sourceMappingURL=fs.js.map