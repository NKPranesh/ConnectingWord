{"ast":null,"code":"import { Vector3, isArray, toRadians, toDegrees, config } from '@math.gl/core';\nimport { WGS84_CONSTANTS } from './constants';\n\nconst noop = x => x;\n\nconst scratchVector = new Vector3();\nexport function fromCartographic(cartographic, result) {\n  let map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  if (isArray(cartographic)) {\n    result[0] = map(cartographic[0]);\n    result[1] = map(cartographic[1]);\n    result[2] = cartographic[2];\n  } else if ('longitude' in cartographic) {\n    result[0] = map(cartographic.longitude);\n    result[1] = map(cartographic.latitude);\n    result[2] = cartographic.height;\n  } else {\n    result[0] = map(cartographic.x);\n    result[1] = map(cartographic.y);\n    result[2] = cartographic.z;\n  }\n\n  return result;\n}\nexport function fromCartographicToRadians(cartographic) {\n  let vector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scratchVector;\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? noop : toRadians);\n}\nexport function fromCartographicToDegrees(cartographic) {\n  let vector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scratchVector;\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? toDegrees : noop);\n}\nexport function toCartographic(vector, cartographic) {\n  let map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  if (isArray(cartographic)) {\n    cartographic[0] = map(vector[0]);\n    cartographic[1] = map(vector[1]);\n    cartographic[2] = vector[2];\n  } else if ('longitude' in cartographic) {\n    cartographic.longitude = map(vector[0]);\n    cartographic.latitude = map(vector[1]);\n    cartographic.height = vector[2];\n  } else {\n    cartographic.x = map(vector[0]);\n    cartographic.y = map(vector[1]);\n    cartographic.z = vector[2];\n  }\n\n  return cartographic;\n}\nexport function toCartographicFromRadians(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? noop : toDegrees);\n}\nexport function toCartographicFromDegrees(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? toRadians : noop);\n}\nexport function isWGS84(vector) {\n  if (!vector) {\n    return false;\n  }\n\n  scratchVector.from(vector);\n  const {\n    oneOverRadiiSquared,\n    centerToleranceSquared\n  } = WGS84_CONSTANTS;\n  const x2 = vector[0] * vector[0] * oneOverRadiiSquared[0];\n  const y2 = vector[1] * vector[1] * oneOverRadiiSquared[1];\n  const z2 = vector[2] * vector[2] * oneOverRadiiSquared[2];\n  return Math.abs(x2 + y2 + z2 - 1) < centerToleranceSquared;\n}","map":{"version":3,"sources":["../../src/type-utils.js"],"names":["noop","x","scratchVector","map","isArray","result","cartographic","vector","fromCartographic","config","toCartographic","centerToleranceSquared","x2","oneOverRadiiSquared","y2","z2","Math"],"mappings":"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","sourcesContent":["// This file is derived from the Cesium math library under Apache 2 license\n// See LICENSE.md and https://github.com/AnalyticalGraphicsInc/cesium/blob/master/LICENSE.md\n\nimport {Vector3, isArray, toRadians, toDegrees, config} from '@math.gl/core';\nimport {WGS84_CONSTANTS} from './constants';\n\nconst noop = (x) => x;\n\nconst scratchVector = new Vector3();\n\nexport function fromCartographic(cartographic, result, map = noop) {\n  if (isArray(cartographic)) {\n    result[0] = map(cartographic[0]);\n    result[1] = map(cartographic[1]);\n    result[2] = cartographic[2];\n  } else if ('longitude' in cartographic) {\n    result[0] = map(cartographic.longitude);\n    result[1] = map(cartographic.latitude);\n    result[2] = cartographic.height;\n  } else {\n    result[0] = map(cartographic.x);\n    result[1] = map(cartographic.y);\n    result[2] = cartographic.z;\n  }\n  return result;\n}\n\nexport function fromCartographicToRadians(cartographic, vector = scratchVector) {\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? noop : toRadians);\n}\n\nexport function fromCartographicToDegrees(cartographic, vector = scratchVector) {\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? toDegrees : noop);\n}\n\nexport function toCartographic(vector, cartographic, map = noop) {\n  if (isArray(cartographic)) {\n    cartographic[0] = map(vector[0]);\n    cartographic[1] = map(vector[1]);\n    cartographic[2] = vector[2];\n  } else if ('longitude' in cartographic) {\n    cartographic.longitude = map(vector[0]);\n    cartographic.latitude = map(vector[1]);\n    cartographic.height = vector[2];\n  } else {\n    cartographic.x = map(vector[0]);\n    cartographic.y = map(vector[1]);\n    cartographic.z = vector[2];\n  }\n  return cartographic;\n}\n\nexport function toCartographicFromRadians(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? noop : toDegrees);\n}\n\nexport function toCartographicFromDegrees(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? toRadians : noop);\n}\n\nexport function isWGS84(vector) {\n  if (!vector) {\n    return false;\n  }\n  scratchVector.from(vector);\n  const {oneOverRadiiSquared, centerToleranceSquared} = WGS84_CONSTANTS;\n  const x2 = vector[0] * vector[0] * oneOverRadiiSquared[0];\n  const y2 = vector[1] * vector[1] * oneOverRadiiSquared[1];\n  const z2 = vector[2] * vector[2] * oneOverRadiiSquared[2];\n  return Math.abs(x2 + y2 + z2 - 1) < centerToleranceSquared;\n}\n"]},"metadata":{},"sourceType":"module"}