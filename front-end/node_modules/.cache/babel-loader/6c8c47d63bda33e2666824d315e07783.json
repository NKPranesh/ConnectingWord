{"ast":null,"code":"export async function waitForGLTFAssets(gltfObjects) {\n  const remaining = [];\n  gltfObjects.scenes.forEach(scene => {\n    scene.traverse(model => {\n      Object.values(model.model.getUniforms()).forEach(uniform => {\n        if (uniform.loaded === false) {\n          remaining.push(uniform);\n        }\n      });\n    });\n  });\n  return await waitWhileCondition(() => remaining.some(uniform => !uniform.loaded));\n}\n\nasync function waitWhileCondition(condition) {\n  while (condition()) {\n    await new Promise(resolve => requestAnimationFrame(resolve));\n  }\n}","map":{"version":3,"sources":["../../../src/scenegraph-layer/gltf-utils.js"],"names":["remaining","gltfObjects","scene","model","Object","uniform","waitWhileCondition","condition","resolve","requestAnimationFrame"],"mappings":"AAEA,OAAO,eAAA,iBAAA,CAAA,WAAA,EAA8C;AACnD,QAAMA,SAAS,GAAf,EAAA;AAEAC,EAAAA,WAAW,CAAXA,MAAAA,CAAAA,OAAAA,CAA2BC,KAAK,IAAI;AAClCA,IAAAA,KAAK,CAALA,QAAAA,CAAeC,KAAK,IAAI;AACtBC,MAAAA,MAAM,CAANA,MAAAA,CAAcD,KAAK,CAALA,KAAAA,CAAdC,WAAcD,EAAdC,EAAAA,OAAAA,CAAiDC,OAAO,IAAI;AAC1D,YAAIA,OAAO,CAAPA,MAAAA,KAAJ,KAAA,EAA8B;AAC5BL,UAAAA,SAAS,CAATA,IAAAA,CAAAA,OAAAA;AACD;AAHHI,OAAAA;AADFF,KAAAA;AADFD,GAAAA;AAUA,SAAO,MAAMK,kBAAkB,CAAC,MAAMN,SAAS,CAATA,IAAAA,CAAeK,OAAO,IAAI,CAACA,OAAO,CAAxE,MAAsCL,CAAP,CAA/B;AACD;;AAED,eAAA,kBAAA,CAAA,SAAA,EAA6C;AAC3C,SAAOO,SAAP,EAAA,EAAoB;AAClB,UAAM,IAAA,OAAA,CAAYC,OAAO,IAAIC,qBAAqB,CAAlD,OAAkD,CAA5C,CAAN;AACD;AACF","sourcesContent":["/* global requestAnimationFrame */\n\nexport async function waitForGLTFAssets(gltfObjects) {\n  const remaining = [];\n\n  gltfObjects.scenes.forEach(scene => {\n    scene.traverse(model => {\n      Object.values(model.model.getUniforms()).forEach(uniform => {\n        if (uniform.loaded === false) {\n          remaining.push(uniform);\n        }\n      });\n    });\n  });\n\n  return await waitWhileCondition(() => remaining.some(uniform => !uniform.loaded));\n}\n\nasync function waitWhileCondition(condition) {\n  while (condition()) {\n    await new Promise(resolve => requestAnimationFrame(resolve));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}