{"version":3,"sources":["../../src/config.js"],"names":["defaultClassicCredentials","username","apiKey","region","mapsUrl","defaultCloudNativeCredentials","accessToken","apiBaseUrl","credentials","setDefaultCredentials","opts","apiVersion","API_VERSIONS","V2","V1","DEFAULT_MAPS_URL_FORMAT","V3","Error","buildMapsUrlFromBase","getDefaultCredentials","suffix","endsWith","substring"],"mappings":";;;;;;;;;;AAAA;;AAEO,MAAMA,yBAAyB,GAAG;AACvCC,EAAAA,QAAQ,EAAE,QAD6B;AAEvCC,EAAAA,MAAM,EAAE,gBAF+B;AAGvCC,EAAAA,MAAM,EAAE,IAH+B;AAIvCC,EAAAA,OAAO,EAAE;AAJ8B,CAAlC;;AAOP,MAAMC,6BAA6B,GAAG;AACpCC,EAAAA,WAAW,EAAE,IADuB;AAEpCC,EAAAA,UAAU,EAAE,IAFwB;AAGpCH,EAAAA,OAAO,EAAE;AAH2B,CAAtC;AAMA,IAAII,WAAW,GAAG,EAAlB;AAEAC,qBAAqB,CAAC,EAAD,CAArB;;AAEO,SAASA,qBAAT,CAA+BC,IAA/B,EAAqC;AAC1C,QAAMC,UAAU,GAAGD,IAAI,CAACC,UAAL,IAAmBC,4BAAaC,EAAnD;;AAEA,UAAQF,UAAR;AACE,SAAKC,4BAAaE,EAAlB;AACEJ,MAAAA,IAAI,CAACN,OAAL,GAAeM,IAAI,CAACN,OAAL,IAAgBW,uCAAwBJ,UAAxB,CAA/B;AACAH,MAAAA,WAAW,GAAG;AACZG,QAAAA,UADY;AAEZ,WAAGX,yBAFS;AAGZ,WAAGU;AAHS,OAAd;AAKA;;AAEF,SAAKE,4BAAaC,EAAlB;AACEH,MAAAA,IAAI,CAACN,OAAL,GAAeM,IAAI,CAACN,OAAL,IAAgBW,uCAAwBJ,UAAxB,CAA/B;AACAH,MAAAA,WAAW,GAAG;AACZG,QAAAA,UADY;AAEZ,WAAGX,yBAFS;AAGZ,WAAGU;AAHS,OAAd;AAMA;;AACF,SAAKE,4BAAaI,EAAlB;AACE,UAAI,CAACN,IAAI,CAACH,UAAV,EAAsB;AACpB,cAAM,IAAIU,KAAJ,uBAEFL,4BAAaI,EAFX,wGAAN;AAKD;;AAED,YAAMT,UAAU,GAAGG,IAAI,CAACH,UAAL,IAAmBF,6BAA6B,CAACE,UAApE;AACAG,MAAAA,IAAI,CAACN,OAAL,GAAeM,IAAI,CAACN,OAAL,IAAgBc,oBAAoB,CAACX,UAAD,CAAnD;AACAC,MAAAA,WAAW,GAAG;AACZG,QAAAA,UADY;AAEZ,WAAGN,6BAFS;AAGZ,WAAGK;AAHS,OAAd;AAKA;;AACF;AACE,YAAM,IAAIO,KAAJ,+BAAiCN,UAAjC,8BAAN;AArCJ;AAuCD;;AAEM,SAASQ,qBAAT,GAAiC;AACtC,SAAOX,WAAP;AACD;;AAEM,SAASU,oBAAT,CAA8BX,UAA9B,EAA0C;AAC/C,MAAIa,MAAM,GAAG,UAAb;;AACA,MAAIb,UAAU,CAACc,QAAX,CAAoB,GAApB,CAAJ,EAA8B;AAC5BD,IAAAA,MAAM,GAAGA,MAAM,CAACE,SAAP,CAAiB,CAAjB,CAAT;AACD;;AAED,mBAAUf,UAAV,SAAuBa,MAAvB;AACD","sourcesContent":["import {API_VERSIONS, DEFAULT_MAPS_URL_FORMAT} from './api/maps-api-common';\n\nexport const defaultClassicCredentials = {\n  username: 'public',\n  apiKey: 'default_public',\n  region: 'us',\n  mapsUrl: null\n};\n\nconst defaultCloudNativeCredentials = {\n  accessToken: null,\n  apiBaseUrl: null,\n  mapsUrl: null\n};\n\nlet credentials = {};\n\nsetDefaultCredentials({});\n\nexport function setDefaultCredentials(opts) {\n  const apiVersion = opts.apiVersion || API_VERSIONS.V2;\n\n  switch (apiVersion) {\n    case API_VERSIONS.V1:\n      opts.mapsUrl = opts.mapsUrl || DEFAULT_MAPS_URL_FORMAT[apiVersion];\n      credentials = {\n        apiVersion,\n        ...defaultClassicCredentials,\n        ...opts\n      };\n      break;\n\n    case API_VERSIONS.V2:\n      opts.mapsUrl = opts.mapsUrl || DEFAULT_MAPS_URL_FORMAT[apiVersion];\n      credentials = {\n        apiVersion,\n        ...defaultClassicCredentials,\n        ...opts\n      };\n\n      break;\n    case API_VERSIONS.V3:\n      if (!opts.apiBaseUrl) {\n        throw new Error(\n          `API version ${\n            API_VERSIONS.V3\n          } requires to define apiBaseUrl at credentials. Go to https://app.carto.com to get your apiBaseUrl.`\n        );\n      }\n\n      const apiBaseUrl = opts.apiBaseUrl || defaultCloudNativeCredentials.apiBaseUrl;\n      opts.mapsUrl = opts.mapsUrl || buildMapsUrlFromBase(apiBaseUrl);\n      credentials = {\n        apiVersion,\n        ...defaultCloudNativeCredentials,\n        ...opts\n      };\n      break;\n    default:\n      throw new Error(`Invalid API version ${apiVersion}. Use API_VERSIONS enum.`);\n  }\n}\n\nexport function getDefaultCredentials() {\n  return credentials;\n}\n\nexport function buildMapsUrlFromBase(apiBaseUrl) {\n  let suffix = '/v3/maps';\n  if (apiBaseUrl.endsWith('/')) {\n    suffix = suffix.substring(1);\n  }\n\n  return `${apiBaseUrl}${suffix}`;\n}\n"],"file":"config.js"}