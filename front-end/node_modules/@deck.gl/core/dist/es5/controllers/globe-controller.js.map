{"version":3,"sources":["../../../src/controllers/globe-controller.js"],"names":["GlobeState","MapState","_applyConstraints","props","maxZoom","minZoom","zoom","longitude","latitude","GlobeController","Controller","constructor","dragMode","setProps","dragRotate","touchRotate","linearTransitionProps"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AAEA,MAAMA,UAAN,SAAyBC,uBAAzB,CAAkC;AAEhCC,EAAAA,iBAAiB,CAACC,KAAD,EAAQ;AAEvB,UAAM;AAACC,MAAAA,OAAD;AAAUC,MAAAA,OAAV;AAAmBC,MAAAA;AAAnB,QAA2BH,KAAjC;AACAA,IAAAA,KAAK,CAACG,IAAN,GAAa,iBAAMA,IAAN,EAAYD,OAAZ,EAAqBD,OAArB,CAAb;AAEA,UAAM;AAACG,MAAAA,SAAD;AAAYC,MAAAA;AAAZ,QAAwBL,KAA9B;;AACA,QAAII,SAAS,GAAG,CAAC,GAAb,IAAoBA,SAAS,GAAG,GAApC,EAAyC;AACvCJ,MAAAA,KAAK,CAACI,SAAN,GAAkB,oBAAIA,SAAS,GAAG,GAAhB,EAAqB,GAArB,IAA4B,GAA9C;AACD;;AACDJ,IAAAA,KAAK,CAACK,QAAN,GAAiB,iBAAMA,QAAN,EAAgB,CAAC,EAAjB,EAAqB,EAArB,CAAjB;AAEA,WAAOL,KAAP;AACD;;AAd+B;;AAiBnB,MAAMM,eAAN,SAA8BC,mBAA9B,CAAyC;AACtDC,EAAAA,WAAW,CAACR,KAAD,EAAQ;AACjBA,IAAAA,KAAK,CAACS,QAAN,GAAiBT,KAAK,CAACS,QAAN,IAAkB,KAAnC;AACA,UAAMZ,UAAN,EAAkBG,KAAlB;AACD;;AAEDU,EAAAA,QAAQ,CAACV,KAAD,EAAQ;AACd,UAAMU,QAAN,CAAeV,KAAf;AAGA,SAAKW,UAAL,GAAkB,KAAlB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACD;;AAED,MAAIC,qBAAJ,GAA4B;AAC1B,WAAO,CAAC,WAAD,EAAc,UAAd,EAA0B,MAA1B,CAAP;AACD;;AAhBqD","sourcesContent":["import {clamp} from 'math.gl';\nimport Controller from './controller';\n\nimport {MapState} from './map-controller';\nimport {mod} from '../utils/math-utils';\n\nclass GlobeState extends MapState {\n  // Apply any constraints (mathematical or defined by _viewportProps) to map state\n  _applyConstraints(props) {\n    // Ensure zoom is within specified range\n    const {maxZoom, minZoom, zoom} = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n\n    const {longitude, latitude} = props;\n    if (longitude < -180 || longitude > 180) {\n      props.longitude = mod(longitude + 180, 360) - 180;\n    }\n    props.latitude = clamp(latitude, -89, 89);\n\n    return props;\n  }\n}\n\nexport default class GlobeController extends Controller {\n  constructor(props) {\n    props.dragMode = props.dragMode || 'pan';\n    super(GlobeState, props);\n  }\n\n  setProps(props) {\n    super.setProps(props);\n\n    // TODO - support pitching?\n    this.dragRotate = false;\n    this.touchRotate = false;\n  }\n\n  get linearTransitionProps() {\n    return ['longitude', 'latitude', 'zoom'];\n  }\n}\n"],"file":"globe-controller.js"}